# lexicom

## Задание 1 - создание API с FastAPI и Redis
Инструкция запуска 

+ `.env` файл уже находится в директории 

+ запуск просиходит из корневой директории командой
`docker-compose up --build`

+ Доступ к документации можно осуществить двумя способами
    + <http://localhost:8000>
    + <https://localhost> - **так как ssl настроенно локально, то при переходе по этой ссылке будет вылезать предупреждение**

---
## Задание 2 - Оптимизация SQL запросов
Инструкция запуска 
+ `.env` файл уже находится в директории
+ нужно перейти из основной директории в дирексторию `db` с помощью команды
`cd db`
+ запуск происходит командой `docker-compose up -d`


1. Создание и наполнение таблиц - **После каждого выполнения скрипта, 
создание и наполнение таблиц нужно перезапустить что бы обновить страницу**
   + Скрипт находится в файле `generate_data.py`
   + Команда для выполнения - `docker-compose run app_db python generate_data.py`
   + > Вставка данных в short_names завершена за 61.52 секунд.<br>
   Вставка данных в full_names завершена за 41.45 секунд.<br>
   *~ время выполнения в докере*

2. Выполнение скрипта с созданием индекса
    + Для таблицы `full_names` создается индекс на поле `name`
    + Скрипт находится в файле `create_index_update.py`

    + Команда для выполнения - `docker-compose run app_db python generate_data.py`
    + > Create index завершен за 8.192698240280151 секунд.<br>
       *~ время выполнения в докере*
3. Выполнение скрипта с созданием временной таблицы
    + Создается временная таблица с результатом выполнения объединения двух таблиц, 
далее создается индекс у временной таблицы на поле `name`, и записывается результат в таблицу `full_names`
    + Скрипт находится в файле `temp_table.py`
    + Команда для выполнения - `docker-compose run app_db python temp_table.py`
    + > Temp table завершен за 6.6355674266815186 секунд.<br>
       *~ время выполнения в докере*

4. Выполнение скрипта с отключением триггеров
    + У таблицы `full_names` отключаем триггеры на время записи данных.
У такого способа имееются потенциальные проблемы, и делать так не советуется. 
Но при больших вставках он может выйграть в производительности.
    + Скрипт находится в файле `disable_triggers.py`
    + Команда для выполнения - `docker-compose run app_db python disable_triggers.py`
    + > Disable triggers завершен за 4.428581953048706 секунд<br>
       *~ время выполнения в докере*


5. Выполнение скрипта с импользованием python структур
    + Суть заключается в первичном использовании Python структур для фильтрации 
и множественной вставке чанками
    + Скрипт находится в файле `python_batch_update.py`
    + Команда для выполнения - `docker-compose run app_db python python_batch_update.py`
    + > Python batch update завершен за 52.605088233947754 секунд.<br>
       *~ время выполнения в докере*
    






